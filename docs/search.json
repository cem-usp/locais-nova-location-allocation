[
  {
    "objectID": "index.html#overview",
    "href": "index.html#overview",
    "title": "",
    "section": "Overview",
    "text": "Overview\nThis report provides a reproducible pipeline for calculating the Maximal Coverage Location-Allocation to identify optimal sites for fresh and/or healthy food establishments in favelas (informal settlements in Brazil) and urban communities. The goal is to improve accessibility and maximize coverage within the study region.\nFor instructions on how to run the pipeline, see the repository README."
  },
  {
    "objectID": "index.html#problem",
    "href": "index.html#problem",
    "title": "",
    "section": "Problem",
    "text": "Problem\nThe AcessoSAN project aims to develop methods for measuring and analyzing inequities in access to fresh and/or healthy food in favelas (informal settlements in Brazil) and other urban communities. Achieving this requires mapping the current food environment and identifying optimal locations for new food establishments to improve accessibility. This pipeline addresses this need by providing a systematic approach to location-allocation analysis using the Locais-Nova scale groups (Silva et al., 2025)."
  },
  {
    "objectID": "index.html#data-availability",
    "href": "index.html#data-availability",
    "title": "",
    "section": "Data Availability",
    "text": "Data Availability\n\nThe processed data are available in csv, rds and parquet formats through dedicated repositories on the Open Science Framework (OSF). A metadata file is included alongside the validated datasets.\nOnly authorized personnel can access the pipeline raw and processed files. They are protected with RSA 4096-bit encryption (OpenSSL) and a 32-byte password to ensure data security."
  },
  {
    "objectID": "index.html#methods",
    "href": "index.html#methods",
    "title": "",
    "section": "Methods",
    "text": "Methods\nSource of Data\nThe data used in this report come from the following sources:\n\nBrazilian Federal Revenue Service (RFB)\n\nLegal entities data from the National Register of Legal Entities (CNPJ) database, used for company identification (Brasil et al., n.d.).\nCodes of Brazilian agencies and municipalities (Tabela de Órgãos e Municípios, TOM) (Brasil & Sistema de Vigilância Alimentar e Nutricional, n.d.), used to identify municipalities in the CNPJ database.\n\n\nBrazilian Institute of Geography and Statistics (IBGE)\n\nCodes and descriptions from the National Classification of Economic Activities (CNAE) (Instituto Brasileiro de Geografia e Estatística & Comissão Nacional de Classificação, n.d.), used to match establishments to the Locais-Nova groups.\nTract shapes from the Brazilian 2022 Census via the geobr R package (Pereira & Goncalves, n.d.), used to calculate population density.\nTract population data from the Brazilian 2022 Census via the censobr R package (Pereira & Goncalves, n.d.), used to calculate population density.\nOpen spatial datasets of Brazilian addresses from the National Address Register for Statistical Purposes (CNEFE), used for geocoding the establishments via the geocodebr R package (Pereira & Herszenhut, n.d.).\n\n\nCenter for Metropolitan Studies (CEM)\n\nLookup table providing the classification linking the establishments CNAEs codes to the Locais-Nova groups (Fernandes & Giannotti, 2025). This data will remain private until further notice.\n\n\nMalaria Atlas Project (MAP)\n\n\nSpatial friction data based on the Global Walking Only Friction Surface dataset (Malaria Atlas Project, 2019), used to calculate travel times.\n\n\nOpenStreetMap (OSM)\n\n\nRoad and footpaths spatial data (OpenStreetMap Contributors, n.d.), used to calculate travel times.\n\n\n\nThe dataset related to the Brazilian Federal Revenue Service (RFB) used in this report was processed by Vartanian et al. (2025) and has its own dedicated pipeline, which can be accessed at: https://cem-usp.github.io/locais-nova-rfb-geocoding\nData Munging\nThe data munging follow the data science workflow outlined by Wickham et al. (2023), as illustrated in Figure 1. All processes were made using the Quarto publishing system (Allaire et al., n.d.), the R programming language (R Core Team, n.d.) and several R packages.\nFor data manipulation and workflow, priority was given to packages from the tidyverse, rOpenSci and r-spatial ecosystems, as well as other packages adhering to the tidy tools manifesto (Wickham, 2023).\n\n\nFigure 1: Data science workflow created by Wickham, Çetinkaya-Runde, and Grolemund.\n\n\nSource: Reproduced from Wickham et al. (2023).\n\n\n\nCode Style\nThe Tidyverse Tidy Tools Manifesto (Wickham, 2023), code style guide (Wickham, n.d.-a) and design principles (Wickham, n.d.-b) were followed to ensure consistency and enhance readability.\nReproducibility\nThe pipeline is fully reproducible and can be run again at any time. To ensure consistent results, the renv package (Ushey & Wickham, n.d.) is used to manage and restore the R environment. See the README file in the code repository to learn how to run it."
  },
  {
    "objectID": "index.html#set-the-environment",
    "href": "index.html#set-the-environment",
    "title": "",
    "section": "Set the Environment",
    "text": "Set the Environment\n\n\n\n\n\n\nThis section sets up the R environment needed for the workflow.\n\n\n\nLoad Packages\n\nlibrary(askpass)\nlibrary(arrow)\nlibrary(brandr)\nlibrary(beepr)\nlibrary(censobr)\nlibrary(cli)\nlibrary(curl)\nlibrary(dplyr)\nlibrary(fs)\nlibrary(ggplot2)\nlibrary(ggspatial)\nlibrary(geobr)\nlibrary(here)\nlibrary(htmltools)\nlibrary(leaflet)\n# install.packages(\"remotes\")\n# remotes::install_github(\"danielvartan/locationallocation\")\nlibrary(locationallocation)\n# remotes::install_github(\"danielvartan/lockr\")\nlibrary(lockr) # github.com/danielvartan/lockr\nlibrary(magrittr)\nlibrary(nngeo)\n# remotes::install_github(\"danielvartan/orbis\")\nlibrary(orbis) # github.com/danielvartan/orbis\nlibrary(osfr)\nlibrary(raster)\nlibrary(readr)\nlibrary(sf)\nlibrary(stars)\nlibrary(stringr)\nlibrary(tidyr)\nlibrary(readxl)\nlibrary(zip)\n\nSet Keys\n\n\n\n\n\n\nSee the Data Availability section for more information.\n\n\n\n\nosf_auth(Sys.getenv(\"OSF_PAT\")) # askpass())\n\n\npublic_key &lt;- here(\"_ssh\", \"id_rsa.pub\")\n\n\nprivate_key &lt;- here(\"_ssh\", \"id_rsa\")\n\n\npassword &lt;- Sys.getenv(\"ACESSOSAN_PASSWORD\") # askpass()\n\nSet Data Directory\n\ndata_dir &lt;- here(\"data\")\n\n\nif (!dir_exists(data_dir)) dir_create(data_dir, recurse = TRUE)\n\nSet Initial Variables\n\nset.seed(2025)\n\n\n\n\n\n\n\nThe year variable is related to the year of the RFB dataset. At the moment, only the 2025 dataset is available.\n\n\n\n\nyear &lt;- 2025\n\n\n\n\n\n\n\nThe locais_nova_group variable defines the Locais-Nova scale group (Silva et al., 2025)to be analyzed. This pipeline utilizes the Locais-Nova scale groups to classify food establishments.\nThe G0 group is a distinct subset comprising establishments from the G1-G2 group that are not simultaneously classified under G3 or G4.\n\n\n\n\nlocais_nova_group &lt;- \"G0\" # G1-G2, G3, G4\n\n\n\n\n\n\n\nThe objective_minutes variable defines the maximum travel time (in minutes) for coverage analysis.\n\n\n\n\nobjective_minutes &lt;- 15\n\n\n\n\n\n\n\nThe favela variable specifies the IBGE code of the favela to be analyzed. Select only one for analysis by uncommenting the corresponding IBGE code.\n\n\n\n\nfavela &lt;- c(\n  # 35503080012 # Heliópolis (São Paulo-SP)\n  35503080492 # Paraisópolis (São Paulo-SP)\n  # 35503080435 # Nova Jaguaré (São Paulo-SP)\n  # 35503081093 # Recanto do Paraíso (São Paulo-SP)\n  # 35503080376 # Jardim Iporanga / Esmeralda (São Paulo-SP)\n)\n\n\nmunicipality_code &lt;-\n  favela |&gt;\n  str_sub(1, 7) |&gt;\n  as.integer()"
  },
  {
    "objectID": "index.html#download-rfb-data",
    "href": "index.html#download-rfb-data",
    "title": "",
    "section": "Download RFB Data",
    "text": "Download RFB Data\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\nDownload File\n\nosf_raw_data_id &lt;- \"2x6jb\"\n\n\nosf_raw_data_files &lt;-\n  osf_raw_data_id |&gt;\n  osf_retrieve_node() |&gt;\n  osf_ls_files(\n    type = \"file\",\n    pattern = \"2025-01.rds.lockr\",\n    n_max = Inf\n  )\n\n\nosf_raw_data_files\n\n\n  \n\n\n\n\nrfb_file &lt;-\n  osf_raw_data_files |&gt;\n  osf_download(path = data_dir, conflicts = \"overwrite\") |&gt;\n  extract2(\"local_path\")\n\nUnlock File\n\nrfb_file |&gt;\n  unlock_file(\n    private_key = private_key,\n    suffix = \".lockr\",\n    remove_file = TRUE,\n    password = password\n  )"
  },
  {
    "objectID": "index.html#download-and-import-ibge-cnae-data",
    "href": "index.html#download-and-import-ibge-cnae-data",
    "title": "",
    "section": "Download and Import IBGE CNAE Data",
    "text": "Download and Import IBGE CNAE Data\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\nDownload Data\n\ncnae_file &lt;-\n  file.path(\n    \"https:/\",\n    \"concla.ibge.gov.br/images/concla/documentacao\",\n    \"CNAE_Subclasses_2_3_Estrutura_Detalhada.xlsx\"\n) |&gt;\n  curl_download(\n    here(data_dir, \"CNAE_Subclasses_2_3_Estrutura_Detalhada.xlsx\")\n  )\n\nImport Data\n\ncnae_data &lt;-\n  cnae_file |&gt;\n  read_xlsx(\n    sheet = \"Estrutura Det. CNAE Subclass2.3\",\n    range = \"E5:F2401\",\n    col_names = c(\"cnae\", \"description\")\n  ) |&gt;\n  drop_na(cnae) |&gt;\n  mutate(\n    cnae =\n      cnae |&gt;\n      str_extract_all(\"\\\\d\") |&gt;\n      lapply(paste, collapse = \"\") |&gt;\n      unlist()\n  )\n\n\ncnae_data |&gt; glimpse()\n#&gt; Rows: 1,331\n#&gt; Columns: 2\n#&gt; $ cnae        &lt;chr&gt; \"0111301\", \"0111302\", \"0111303\", \"0111399\", \"0112101\", …\n#&gt; $ description &lt;chr&gt; \"Cultivo de arroz\", \"Cultivo de milho\", \"Cultivo de tri…"
  },
  {
    "objectID": "index.html#download-and-import-census-tract-population-data",
    "href": "index.html#download-and-import-census-tract-population-data",
    "title": "",
    "section": "Download and Import Census Tract Population Data",
    "text": "Download and Import Census Tract Population Data\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\n\ncensus_population_data &lt;-\n  read_tracts(\n    year = 2022, # Last available year\n    dataset = \"Basico\",\n    as_data_frame = FALSE,\n    showProgress = TRUE,\n    cache = TRUE,\n    verbose = TRUE\n  )\n#&gt; ℹ Reading data cached locally.\n\n\ncensus_population_data |&gt; glimpse()\n#&gt; FileSystemDataset with 1 Parquet file\n#&gt; 468,099 rows x 36 columns\n#&gt; $ code_tract               &lt;string&gt; \"110001505000002\", \"110001505000003\", \"11…\n#&gt; $ situacao                 &lt;string&gt; \"Urbana\", \"Urbana\", \"Urbana\", \"Urbana\", \"…\n#&gt; $ code_situacao            &lt;double&gt; 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 8, 8,…\n#&gt; $ code_type                &lt;double&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n#&gt; $ area_km2                 &lt;double&gt; 0.5393102, 0.2362175, 0.2118666, 0.505447…\n#&gt; $ code_region              &lt;double&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n#&gt; $ name_region              &lt;string&gt; \"Norte\", \"Norte\", \"Norte\", \"Norte\", \"Nort…\n#&gt; $ code_state               &lt;double&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ name_state               &lt;string&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rond…\n#&gt; $ code_muni                &lt;double&gt; 1100015, 1100015, 1100015, 1100015, 11000…\n#&gt; $ name_muni                &lt;string&gt; \"Alta Floresta D'Oeste\", \"Alta Floresta D…\n#&gt; $ code_district            &lt;double&gt; 110001505, 110001505, 110001505, 11000150…\n#&gt; $ name_district            &lt;string&gt; \"Alta Floresta D'Oeste\", \"Alta Floresta D…\n#&gt; $ code_subdistrict         &lt;double&gt; 11000150500, 11000150500, 11000150500, 11…\n#&gt; $ name_subdistrict         &lt;string&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ code_neighborhood        &lt;double&gt; 1100015006, 1100015006, 1100015005, 11000…\n#&gt; $ name_neighborhood        &lt;string&gt; \"Redondo\", \"Redondo\", \"Princesa Isabel\", …\n#&gt; $ code_nucleo_urbano       &lt;double&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ name_nucleo_urbano       &lt;string&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ code_favela              &lt;double&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ name_favela              &lt;string&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ code_aglomerado          &lt;double&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ name_aglomerado          &lt;string&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ code_intermediate        &lt;double&gt; 1102, 1102, 1102, 1102, 1102, 1102, 1102,…\n#&gt; $ name_intermediate        &lt;string&gt; \"Ji-Paraná\", \"Ji-Paraná\", \"Ji-Paraná\", \"J…\n#&gt; $ code_immediate           &lt;double&gt; 110005, 110005, 110005, 110005, 110005, 1…\n#&gt; $ name_immediate           &lt;string&gt; \"Cacoal\", \"Cacoal\", \"Cacoal\", \"Cacoal\", \"…\n#&gt; $ code_urban_concentration &lt;double&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ name_urban_concentration &lt;string&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n#&gt; $ V0001                    &lt;double&gt; 928, 556, 222, 785, 748, 631, 884, 762, 2…\n#&gt; $ V0002                    &lt;double&gt; 376, 243, 102, 318, 334, 298, 386, 357, 1…\n#&gt; $ V0003                    &lt;double&gt; 376, 243, 102, 318, 334, 298, 386, 357, 1…\n#&gt; $ V0004                    &lt;double&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0,…\n#&gt; $ V0005                    &lt;double&gt; 2.8, 2.7, 2.6, 2.8, 2.6, 2.7, 2.7, 2.6, 2…\n#&gt; $ V0006                    &lt;double&gt; 0.0923, 0.0048, 0.0000, 0.0000, 0.0447, 0…\n#&gt; $ V0007                    &lt;double&gt; 336, 208, 85, 282, 291, 234, 329, 291, 10…\n#&gt; Call `print()` for full schema details"
  },
  {
    "objectID": "index.html#download-and-import-census-tract-shape-data",
    "href": "index.html#download-and-import-census-tract-shape-data",
    "title": "",
    "section": "Download and Import Census Tract Shape Data",
    "text": "Download and Import Census Tract Shape Data\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\n\ncensus_tract_data &lt;-\n  read_census_tract(\n    code_tract = municipality_code,\n    year = 2022, # Last available year\n    simplified = TRUE,\n    showProgress = TRUE,\n    cache = TRUE\n  )\n#&gt; Using year/date 2022\n\n\ncensus_tract_data |&gt; glimpse()\n#&gt; Rows: 27,301\n#&gt; Columns: 24\n#&gt; $ code_tract               &lt;dbl&gt; 355030801000001, 355030801000002, 35503080…\n#&gt; $ code_muni                &lt;dbl&gt; 3550308, 3550308, 3550308, 3550308, 355030…\n#&gt; $ name_muni                &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ name_neighborhood        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ code_neighborhood        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ code_subdistrict         &lt;dbl&gt; 35503080100, 35503080100, 35503080100, 355…\n#&gt; $ name_subdistrict         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ code_district            &lt;dbl&gt; 355030801, 355030801, 355030801, 355030801…\n#&gt; $ name_district            &lt;chr&gt; \"Água Rasa\", \"Água Rasa\", \"Água Rasa\", \"Ág…\n#&gt; $ code_urban_concentration &lt;dbl&gt; 3550308, 3550308, 3550308, 3550308, 355030…\n#&gt; $ name_urban_concentration &lt;chr&gt; \"São Paulo/SP\", \"São Paulo/SP\", \"São Paulo…\n#&gt; $ code_state               &lt;dbl&gt; 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35…\n#&gt; $ name_state               &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ code_immediate           &lt;dbl&gt; 350001, 350001, 350001, 350001, 350001, 35…\n#&gt; $ name_immediate           &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ code_intermediate        &lt;dbl&gt; 3501, 3501, 3501, 3501, 3501, 3501, 3501, …\n#&gt; $ name_intermediate        &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ code_region              &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, …\n#&gt; $ name_region              &lt;chr&gt; \"Sudeste\", \"Sudeste\", \"Sudeste\", \"Sudeste\"…\n#&gt; $ situacao                 &lt;chr&gt; \"Urbana\", \"Urbana\", \"Urbana\", \"Urbana\", \"U…\n#&gt; $ code_situacao            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n#&gt; $ code_type                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ area_km2                 &lt;dbl&gt; 0.07179665637, 0.07190181140, 0.0556811700…\n#&gt; $ geom                     &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((-46.5695541..…"
  },
  {
    "objectID": "index.html#explore-favela-data",
    "href": "index.html#explore-favela-data",
    "title": "",
    "section": "Explore Favela Data",
    "text": "Explore Favela Data\nFilter Census Population Data\n\nfavela_data &lt;-\n  census_population_data |&gt;\n  filter(\n    code_muni == .env$municipality_code,\n    !is.na(code_favela)\n  ) |&gt;\n  collect() |&gt;\n  as_tibble()\n\nExplore Data\n\nfavela_data |&gt; glimpse()\n#&gt; Rows: 3,879\n#&gt; Columns: 36\n#&gt; $ code_tract               &lt;chr&gt; \"355030803000112\", \"355030803000113\", \"355…\n#&gt; $ situacao                 &lt;chr&gt; \"Urbana\", \"Urbana\", \"Urbana\", \"Urbana\", \"U…\n#&gt; $ code_situacao            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n#&gt; $ code_type                &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n#&gt; $ area_km2                 &lt;dbl&gt; 0.0102914, 0.0081105, 0.0106095, 0.0067497…\n#&gt; $ code_region              &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, …\n#&gt; $ name_region              &lt;chr&gt; \"Sudeste\", \"Sudeste\", \"Sudeste\", \"Sudeste\"…\n#&gt; $ code_state               &lt;dbl&gt; 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35…\n#&gt; $ name_state               &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ code_muni                &lt;dbl&gt; 3550308, 3550308, 3550308, 3550308, 355030…\n#&gt; $ name_muni                &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ code_district            &lt;dbl&gt; 355030803, 355030803, 355030803, 355030803…\n#&gt; $ name_district            &lt;chr&gt; \"Anhanguera\", \"Anhanguera\", \"Anhanguera\", …\n#&gt; $ code_subdistrict         &lt;dbl&gt; 35503080300, 35503080300, 35503080300, 355…\n#&gt; $ name_subdistrict         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ code_neighborhood        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ name_neighborhood        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ code_nucleo_urbano       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ name_nucleo_urbano       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ code_favela              &lt;dbl&gt; 35503081115, 35503081121, 35503081116, 355…\n#&gt; $ name_favela              &lt;chr&gt; \"Favelinha Jardim Jaraguá\", \"Jardim Jaragu…\n#&gt; $ code_aglomerado          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ name_aglomerado          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n#&gt; $ code_intermediate        &lt;dbl&gt; 3501, 3501, 3501, 3501, 3501, 3501, 3501, …\n#&gt; $ name_intermediate        &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ code_immediate           &lt;dbl&gt; 350001, 350001, 350001, 350001, 350001, 35…\n#&gt; $ name_immediate           &lt;chr&gt; \"São Paulo\", \"São Paulo\", \"São Paulo\", \"Sã…\n#&gt; $ code_urban_concentration &lt;dbl&gt; 3550308, 3550308, 3550308, 3550308, 355030…\n#&gt; $ name_urban_concentration &lt;chr&gt; \"São Paulo/SP\", \"São Paulo/SP\", \"São Paulo…\n#&gt; $ V0001                    &lt;dbl&gt; 363, 260, 166, 449, 450, 188, 554, 570, 46…\n#&gt; $ V0002                    &lt;dbl&gt; 138, 118, 65, 181, 171, 69, 225, 217, 162,…\n#&gt; $ V0003                    &lt;dbl&gt; 138, 118, 65, 181, 171, 69, 225, 217, 162,…\n#&gt; $ V0004                    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ V0005                    &lt;dbl&gt; 2.9, 2.8, 2.7, 2.8, 2.9, 2.9, 2.8, 2.9, 3.…\n#&gt; $ V0006                    &lt;dbl&gt; 0.6772, 0.2447, 0.1935, 0.2778, 0.3377, 0.…\n#&gt; $ V0007                    &lt;dbl&gt; 127, 94, 62, 162, 154, 65, 195, 195, 151, …\n\n\nfavela_data |&gt;\n  pull(name_favela) |&gt;\n  unique() |&gt;\n  length()\n#&gt; [1] 1363\n\n\nfavela_data |&gt;\n  dplyr::select(code_favela, name_favela) |&gt;\n  arrange(name_favela) |&gt;\n  distinct()"
  },
  {
    "objectID": "index.html#filter-and-join-census-data",
    "href": "index.html#filter-and-join-census-data",
    "title": "",
    "section": "Filter and Join Census Data",
    "text": "Filter and Join Census Data\n\ncensus_data &lt;-\n  census_population_data |&gt;\n  filter(\n    code_muni == .env$municipality_code,\n    code_favela == .env$favela\n  ) |&gt;\n  dplyr::select(code_tract, V0001) |&gt;\n  rename(population = V0001) |&gt;\n  mutate(code_tract = as.numeric(code_tract)) |&gt;\n  collect() |&gt;\n  left_join(census_tract_data, by = \"code_tract\") |&gt;\n  rename(tract_code = code_tract) |&gt;\n  dplyr::select(tract_code, population, geom) |&gt;\n  st_as_sf()\n\n\ncensus_data |&gt; glimpse()\n#&gt; Rows: 76\n#&gt; Columns: 3\n#&gt; $ tract_code &lt;dbl&gt; 355030883000009, 355030883000015, 355030883000040, 35503…\n#&gt; $ population &lt;dbl&gt; 881, 788, 827, 646, 465, 1017, 1295, 785, 800, 1259, 171…\n#&gt; $ geom       &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((-46.7273518..., MULTIPOLYGO…"
  },
  {
    "objectID": "index.html#create-favela-shape",
    "href": "index.html#create-favela-shape",
    "title": "",
    "section": "Create Favela Shape",
    "text": "Create Favela Shape\n\nshape &lt;-\n  census_data |&gt;\n  st_geometry() |&gt;\n  st_union() |&gt;\n  st_make_valid() |&gt;\n  st_cast(\"POLYGON\") |&gt;\n  nngeo::st_remove_holes() |&gt;\n  st_union(is_coverage = TRUE) |&gt;\n  st_as_sf()"
  },
  {
    "objectID": "index.html#import-data-1",
    "href": "index.html#import-data-1",
    "title": "",
    "section": "Import Data",
    "text": "Import Data\n\ndata &lt;-\n  here(data_dir, \"2025-01.rds\") |&gt;\n  read_rds()"
  },
  {
    "objectID": "index.html#filter-data",
    "href": "index.html#filter-data",
    "title": "",
    "section": "Filter Data",
    "text": "Filter Data\n\ndata &lt;-\n  data |&gt;\n  filter(\n    municipality_code == .env$municipality_code,\n    geocodebr_precision %in% c(\"numero\", \"numero_aproximado\")\n  ) |&gt;\n  dplyr::select(\n    cnpj,\n    cnae,\n    longitude,\n    latitude,\n    locais_nova_g0,\n    locais_nova_g1_g2,\n    locais_nova_g3,\n    locais_nova_g4\n  )"
  },
  {
    "objectID": "index.html#transform-data",
    "href": "index.html#transform-data",
    "title": "",
    "section": "Transform Data",
    "text": "Transform Data\n\ndata &lt;-\n  data |&gt;\n  st_as_sf(coords = c(\"longitude\", \"latitude\"), crs = st_crs(shape)) |&gt;\n  pivot_longer(\n    cols = starts_with(\"locais_nova_\"),\n    names_to = \"group\",\n    values_to = \"value\"\n  ) |&gt;\n  filter(value == TRUE) |&gt;\n  mutate(\n    group =\n      group |&gt;\n      str_remove(\"locais_nova_\") |&gt;\n      str_to_upper() |&gt;\n      str_replace(\"_\", \"-\")\n  ) |&gt;\n  st_join(shape, join = st_within, left = FALSE) |&gt;\n  dplyr::select(cnpj, cnae, group, geometry)"
  },
  {
    "objectID": "index.html#explore-the-data",
    "href": "index.html#explore-the-data",
    "title": "",
    "section": "Explore the Data",
    "text": "Explore the Data\nGlimpse Data\n\ndata |&gt; glimpse()\n#&gt; Rows: 853\n#&gt; Columns: 4\n#&gt; $ cnpj     &lt;chr&gt; \"53.292.307/0001-70\", \"53.292.307/0001-70\", \"40.420.883/00…\n#&gt; $ cnae     &lt;chr&gt; \"4711-3/02\", \"4711-3/02\", \"4712-1/00\", \"4712-1/00\", \"4712-…\n#&gt; $ group    &lt;chr&gt; \"G1-G2\", \"G4\", \"G4\", \"G4\", \"G4\", \"G4\", \"G4\", \"G4\", \"G4\", \"…\n#&gt; $ geometry &lt;POINT [°]&gt; POINT (-46.72797394 -23.615..., POINT (-46.72797394 …\n\nShow Favela on Leaflet\n\nshape_centroid &lt;-\n  shape |&gt;\n  st_centroid() |&gt;\n  st_coordinates() |&gt;\n  as.numeric()\n\n\nleaflet() |&gt;\n  addTiles() |&gt;\n  setView(\n    lng = shape_centroid[1],\n    lat = shape_centroid[2],\n    zoom = 15\n  ) |&gt;\n  addPolygons(\n    data = shape |&gt; st_transform(st_crs(\"WGS84\")),\n    fillColor = \"transparent\",\n    color = \"blue\",\n    weight = 2,\n    opacity = 1\n  )\n\n\n\n\n\nPlot Establishments\n\n\n\n\n\n\nThis plot illustrates the distribution of food establishments categorized by Locais-Nova scale groups (Silva et al., 2025). Note that an establishment may belong to multiple groups.\n\n\n\n\nggplot() +\n  geom_sf(\n    data = shape,\n    fill = \"gray90\",\n    color = \"black\"\n  ) +\n  geom_sf(\n    data = data,\n    mapping = aes(color = group),\n    size = 0.01\n  ) +\n  facet_wrap(~ group, ncol = 4) +\n  coord_sf(crs = 4326) +\n  scale_color_brand_d() +\n  scale_x_continuous(labels = NULL, breaks = NULL) +\n  scale_y_continuous(labels = NULL, breaks = NULL) +\n  theme(legend.position = \"none\") +\n  labs(\n    x = NULL,\n    y = NULL,\n    color = NULL\n  )\n\n\n\n\n\n\n\nPlot Tract Population\n\n\n\n\n\n\nThis plot illustrates the population distribution across census tracts within the selected favela.\n\n\n\n\nggplot() +\n  geom_sf(\n    data = shape,\n    fill = \"gray90\",\n    color = \"black\"\n  ) +\n  geom_sf(\n    data = census_data,\n    mapping = aes(fill = population),\n    color = NA\n  ) +\n  scale_fill_viridis_c(option = \"plasma\") +\n  coord_sf(crs = 4326) +\n  annotation_scale(\n    location = \"br\",\n    style = \"tick\",\n    height = unit(0.5, \"lines\")\n  ) +\n  annotation_north_arrow(\n    location = \"br\",\n    height = unit(2, \"lines\"),\n    width = unit(2, \"lines\"),\n    pad_x = unit(0.25, \"lines\"),\n    pad_y = unit(1.25, \"lines\"),\n    style = north_arrow_fancy_orienteering\n  ) +\n  theme(legend.position = \"right\") +\n  labs(\n    x = NULL,\n    y = NULL,\n    fill = \"Population\"\n  )"
  },
  {
    "objectID": "index.html#compute-maximal-coverage-location-allocation-with-restaurants",
    "href": "index.html#compute-maximal-coverage-location-allocation-with-restaurants",
    "title": "",
    "section": "Compute Maximal Coverage Location-Allocation (With Restaurants)",
    "text": "Compute Maximal Coverage Location-Allocation (With Restaurants)\n\n\n\n\n\n\nThe Locais-Nova scale add restaurants (CNAE 5611-2/01) as potential establishments for fresh and/or healthy food access. But not all restaurants offer such options (e.g., burger joints, pizza places, etc.). Therefore, results should be interpreted with caution.\n\n\n\nFilter Locais-Nova Group\n\nallocation_data &lt;-\n  data |&gt;\n  filter(group == \"G0\") |&gt;\n  st_transform(st_crs(\"WGS84\"))\n\nCheck Allocation Data\n\nunique_cnaes &lt;-\n  allocation_data |&gt;\n  pull(cnae) |&gt;\n  unique() |&gt;\n  sort()\n\n\ncnae_data |&gt;\n  filter(\n    cnae |&gt;\n      magrittr::is_in(\n        unique_cnaes |&gt;\n          str_extract_all(\"\\\\d\") |&gt;\n          lapply(paste, collapse = \"\") |&gt;\n          unlist()\n      )\n  )\n\n\n  \n\n\n\n\nallocation_data |&gt; glimpse()\n#&gt; Rows: 189\n#&gt; Columns: 4\n#&gt; $ cnpj     &lt;chr&gt; \"24.650.407/0001-22\", \"54.624.979/0001-06\", \"04.047.609/00…\n#&gt; $ cnae     &lt;chr&gt; \"4722-9/01\", \"4722-9/01\", \"4722-9/01\", \"4722-9/01\", \"4722-…\n#&gt; $ group    &lt;chr&gt; \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\"…\n#&gt; $ geometry &lt;POINT [°]&gt; POINT (-46.72633289 -23.615..., POINT (-46.72856681 …\n\n\nallocation_data\n\n\n  \n\n\n\nNormalize Favela Shape CRS\n\nallocation_shape &lt;-\n  shape |&gt;\n  st_transform(st_crs(\"WGS84\"))\n\nPlot Food Establishments\n\n\n\n\n\n\nThis plot illustrates the spatial distribution of food establishments within the selected Locais-Nova scale group.\n\n\n\nPlot Establishments\n\nggplot() +\n  geom_sf(\n    data = shape,\n    fill = \"gray90\",\n    color = \"black\"\n  ) +\n  geom_sf(\n    data = allocation_data,\n    color = get_brand_color(\"blue\"),\n    size = 1\n  ) +\n  coord_sf(crs = \"WGS84\") +\n  annotation_scale(\n    location = \"br\",\n    style = \"tick\",\n    height = unit(0.5, \"lines\")\n  ) +\n  annotation_north_arrow(\n    location = \"br\",\n    height = unit(2, \"lines\"),\n    width = unit(2, \"lines\"),\n    pad_x = unit(0.25, \"lines\"),\n    pad_y = unit(1.25, \"lines\"),\n    style = north_arrow_fancy_orienteering\n  ) +\n  scale_color_brand_d() +\n  theme(legend.position = \"none\") +\n  labs(x = NULL, y = NULL)\n\n\n\n\n\n\n\nShow Establishments on Leaflet\n\nshape_centroid &lt;-\n  shape |&gt;\n  st_centroid() |&gt;\n  st_coordinates() |&gt;\n  as.numeric()\n\n\npoint_coordinates &lt;-\n  allocation_data |&gt;\n  mutate(\n    latitude = st_coordinates(geometry)[, 2],\n    longitude = st_coordinates(geometry)[, 1]\n  ) |&gt;\n  dplyr::select(cnpj, latitude, longitude) |&gt;\n  st_drop_geometry()\n\n\nleaflet() |&gt;\n  addTiles() |&gt;\n  setView(\n    lng = shape_centroid[1],\n    lat = shape_centroid[2],\n    zoom = 15\n  ) |&gt;\n  addMarkers(\n    lng = point_coordinates$longitude,\n    lat = point_coordinates$latitude,\n    popup = point_coordinates$cnpj\n  )\n\n\n\n\n\nCompute Travel Time\n\n\n\n\n\n\nThis process may require substantial computational resources, depending on the area’s size and the number of establishments analyzed. Ensure your system has adequate capacity before proceeding.\n\n\n\n\ntravel_time_data &lt;-\n  allocation_data |&gt;\n  traveltime(\n    bb_area = allocation_shape,\n    dowscaling_model_type = \"lm\",\n    mode = \"walk\",\n    res_output = 10\n  )\n\nPlot Travel Time\n\n\n\n\n\n\nThis plot illustrates walking travel times from food establishments within the selected Locais-Nova scale group, considering the spatial friction of the area. Contour lines represent travel times up to the specified objective minutes.\n\n\n\n\ntravel_time_data |&gt;\n  traveltime_plot(\n    bb_area = allocation_shape,\n    facilities = allocation_data,\n    contour_traveltime = objective_minutes\n  )\n\n\n\n\n\n\n\nRasterize Population Data\n\ncensus_raster_data &lt;-\n  census_data |&gt;\n  dplyr::select(-tract_code) |&gt;\n  st_transform(st_crs(\"WGS84\")) |&gt;\n  st_rasterize() |&gt;\n  as(\"Raster\")\n\nCompute Travel Time Stats\n\n\n\n\n\n\nThis plot illustrates the cumulative population coverage achieved within the specified travel time intervals from food establishments in the selected Locais-Nova scale group, highlighting accessibility patterns and potential gaps in coverage.\n\n\n\n\ntravel_time_stats &lt;-\n  travel_time_data |&gt;\n  traveltime_stats(\n    demand = census_raster_data,\n    breaks = c(5, 10, 15, 30),\n    objectiveminutes = objective_minutes\n  )\n#&gt; ℹ 100% of coverage within the 15 minutes threshold."
  },
  {
    "objectID": "index.html#compute-maximal-coverage-location-allocation-without-restaurants",
    "href": "index.html#compute-maximal-coverage-location-allocation-without-restaurants",
    "title": "",
    "section": "Compute Maximal Coverage Location-Allocation (Without Restaurants)",
    "text": "Compute Maximal Coverage Location-Allocation (Without Restaurants)\nFilter Allocation Data\n\nallocation_data &lt;-\n  allocation_data |&gt;\n  filter(!cnae == \"5611-2/01\") |&gt;\n  st_transform(st_crs(\"WGS84\"))\n\nCheck Allocation Data\n\nunique_cnaes &lt;-\n  allocation_data |&gt;\n  pull(cnae) |&gt;\n  unique() |&gt;\n  sort()\n\n\ncnae_data |&gt;\n  filter(\n    cnae |&gt;\n      magrittr::is_in(\n        unique_cnaes |&gt;\n          str_extract_all(\"\\\\d\") |&gt;\n          lapply(paste, collapse = \"\") |&gt;\n          unlist()\n      )\n  )\n\n\n  \n\n\n\n\nallocation_data |&gt; glimpse()\n#&gt; Rows: 42\n#&gt; Columns: 4\n#&gt; $ cnpj     &lt;chr&gt; \"24.650.407/0001-22\", \"54.624.979/0001-06\", \"04.047.609/00…\n#&gt; $ cnae     &lt;chr&gt; \"4722-9/01\", \"4722-9/01\", \"4722-9/01\", \"4722-9/01\", \"4722-…\n#&gt; $ group    &lt;chr&gt; \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\", \"G0\"…\n#&gt; $ geometry &lt;POINT [°]&gt; POINT (-46.72633289 -23.615..., POINT (-46.72856681 …\n\n\nallocation_data\n\n\n  \n\n\n\nNormalize Favela Shape CRS\n\nallocation_shape &lt;-\n  shape |&gt;\n  st_transform(st_crs(\"WGS84\"))\n\nPlot Food Establishments\n\n\n\n\n\n\nThis plot illustrates the spatial distribution of food establishments within the selected Locais-Nova scale group.\n\n\n\nPlot Establishments\n\nggplot() +\n  geom_sf(\n    data = shape,\n    fill = \"gray90\",\n    color = \"black\"\n  ) +\n  geom_sf(\n    data = allocation_data,\n    color = get_brand_color(\"blue\"),\n    size = 1\n  ) +\n  coord_sf(crs = \"WGS84\") +\n  annotation_scale(\n    aes(),\n    location = \"br\",\n    style = \"tick\",\n    height = unit(0.5, \"lines\")\n  ) +\n  annotation_north_arrow(\n    location = \"br\",\n    height = unit(2, \"lines\"),\n    width = unit(2, \"lines\"),\n    pad_x = unit(0.25, \"lines\"),\n    pad_y = unit(1.25, \"lines\"),\n    style = north_arrow_fancy_orienteering\n  ) +\n  scale_color_brand_d() +\n  theme(legend.position = \"none\") +\n  labs(x = NULL, y = NULL)\n\n\n\n\n\n\n\nShow Establishments on Leaflet\n\nshape_centroid &lt;-\n  shape |&gt;\n  st_centroid() |&gt;\n  st_coordinates() |&gt;\n  as.numeric()\n\n\npoint_coordinates &lt;-\n  allocation_data |&gt;\n  mutate(\n    latitude = st_coordinates(geometry)[, 2],\n    longitude = st_coordinates(geometry)[, 1]\n  ) |&gt;\n  dplyr::select(cnpj, latitude, longitude) |&gt;\n  st_drop_geometry()\n\n\nleaflet() |&gt;\n  addTiles() |&gt;\n  setView(\n    lng = shape_centroid[1],\n    lat = shape_centroid[2],\n    zoom = 15\n  ) |&gt;\n  addMarkers(\n    lng = point_coordinates$longitude,\n    lat = point_coordinates$latitude,\n    popup = point_coordinates$cnpj\n  )\n\n\n\n\n\nCompute Travel Time\n\n\n\n\n\n\nThis process may require substantial computational resources, depending on the area’s size and the number of establishments analyzed. Ensure your system has adequate capacity before proceeding.\n\n\n\n\ntravel_time_data &lt;-\n  allocation_data |&gt;\n  traveltime(\n    bb_area = allocation_shape,\n    dowscaling_model_type = \"lm\",\n    mode = \"walk\",\n    res_output = 10\n  )\n\nPlot Travel Time\n\n\n\n\n\n\nThis plot illustrates walking travel times to food establishments within the selected Locais-Nova scale group, considering the spatial friction of the area using surface roughness along with roads, streets and paths (see the OpenStreetMap highway key to learn more). Contour lines represent travel times up to the specified objective minutes.\n\n\n\n\ntravel_time_data |&gt;\n  traveltime_plot(\n    bb_area = allocation_shape,\n    facilities = allocation_data,\n    contour_traveltime = objective_minutes\n  )\n\n\n\n\n\n\n\nRasterize Population Data\n\ncensus_raster_data &lt;-\n  census_data |&gt;\n  dplyr::select(-tract_code) |&gt;\n  st_transform(st_crs(\"WGS84\")) |&gt;\n  st_rasterize() |&gt;\n  as(\"Raster\")\n\nCompute Travel Time Stats\n\n\n\n\n\n\nYou can compare this result with the food deserts and food swamps identified on the Alimenta Cidades platform.\n\n\n\n\ntravel_time_stats &lt;-\n  travel_time_data |&gt;\n  traveltime_stats(\n    demand = census_raster_data,\n    breaks = c(5, 10, 15, 30),\n    objectiveminutes = objective_minutes\n  )\n#&gt; ℹ 100% of coverage within the 15 minutes threshold."
  },
  {
    "objectID": "index.html#citation",
    "href": "index.html#citation",
    "title": "",
    "section": "Citation",
    "text": "Citation\n\n\n\n\n\n\nWhen using this data, you must also cite the original data sources.\n\n\n\nTo cite this work, please use the following format:\nVartanian, D., Silva, L. G., Fernandes, C. N., & Giannotti, M. A. (2025). A reproducible pipeline for maximal coverage location-allocation of food establishments in Brazil using the Locais-Nova scale [Computer software]. Center for Metropolitan Studies of the University of São Paulo. https://cem-usp.github.io/locais-nova-location-allocation\nA BibLaTeX entry for LaTeX users is:\n@software{silva2025,\n  title = {A reproducible pipeline for maximal coverage location-allocation of food establishments in Brazil using the Locais-Nova scale},\n  author = {{Daniel Vartanian} and {Letícia Gonçalves Silva} and {Camila Nastari Fernandes} and {Mariana Abrantes Giannotti}},\n  year = {2025},\n  address = {São Paulo},\n  institution = {Center for Metropolitan Studies of the University of São Paulo},\n  langid = {en},\n  url = {https://cem-usp.github.io/locais-nova-location-allocation}\n}"
  },
  {
    "objectID": "index.html#license",
    "href": "index.html#license",
    "title": "",
    "section": "License",
    "text": "License\n\n \n\n\n\n\n\n\n\nThe original data sources may be subject to their own licensing terms and conditions.\n\n\n\nThe code in this repository is licensed under the GNU General Public License Version 3, while the report is available under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International.\nCopyright (C) 2025 Center for Metropolitan Studies\n\nThe code in this report is free software: you can redistribute it and/or\nmodify it under the terms of the GNU General Public License as published by the\nFree Software Foundation, either version 3 of the License, or (at your option)\nany later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with\nthis program. If not, see &lt;https://www.gnu.org/licenses/&gt;."
  },
  {
    "objectID": "index.html#acknowledgments",
    "href": "index.html#acknowledgments",
    "title": "",
    "section": "Acknowledgments",
    "text": "Acknowledgments\n\n\n\n\n\nThis work is part of a research project by the Polytechnic School (Poli) of the University of São Paulo (USP), in partnership with the Secretariat for Food and Nutrition Security (SESAN) of the Ministry of Social Development, Family, and the Fight Against Hunger (MDS), titled: AcessoSAN: Mapping Food Access to Support Public Policies on Food and Nutrition Security and Hunger Reduction in Brazilian Cities.\n\n\n\n\n\n\nThis work was developed with support from the Center for Metropolitan Studies (CEM) based at the School of Philosophy, Letters and Human Sciences (FFLCH) of the University of São Paulo (USP) and at the Brazilian Center for Analysis and Planning (CEBRAP).\n\n\n\n\n\n\nThis study was financed, in part, by the São Paulo Research Foundation (FAPESP), Brazil. Process Number 2025/17879-2."
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "",
    "section": "References",
    "text": "References\n\n\nAllaire, J. J., Teague, C., Xie, Y., & Dervieux, C. (n.d.). Quarto [Computer software]. Zenodo. https://doi.org/10.5281/ZENODO.5960048\n\n\nBrasil, Ministério da Saúde, & Departamento de Informática do SUS. (n.d.). Banco de dados do Sistema Único de Saúde - DATASUS. Retrieved July 17, 2024, from https://datasus.saude.gov.br/\n\n\nBrasil, & Sistema de Vigilância Alimentar e Nutricional. (n.d.). Módulo gerador de relatórios públicos: estado nutricional dos indivíduos acompanhados por período, fase do ciclo da vida e índice. Retrieved September 23, 2024, from https://sisaps.saude.gov.br/sisvan/relatoriopublico\n\n\nInstituto Brasileiro de Geografia e Estatística, & Comissão Nacional de Classificação. (n.d.). CNAE 2.3 Subclasses [Data set]. SIDRA. Retrieved November 16, 2023, from https://concla.ibge.gov.br/classificacoes/download-concla.html\n\n\nMalaria Atlas Project. (2019). Friction surface: Global walking only friction surface (Version 202001) [GeoTIFF]. https://data.malariaatlas.org/maps?layers=Accessibility:202001_Global_Walking_Only_Friction_Surface\n\n\nOpenStreetMap Contributors. (n.d.). OpenStreetMap [Computer software]. OpenStreetMap Foundation. https://www.openstreetmap.org\n\n\nPereira, R. H. M., & Goncalves, C. N. (n.d.). geobr: Download official spatial data sets of Brazil [Computer software]. https://doi.org/10.32614/CRAN.package.geobr\n\n\nPereira, R. H. M., & Herszenhut, D. (n.d.). geocodebr: Geolocalização de endereços brasileiros [Computer software]. https://doi.org/10.32614/CRAN.package.geocodebr\n\n\nR Core Team. (n.d.). R: A language and environment for statistical computing [Computer software]. R Foundation for Statistical Computing. https://www.R-project.org\n\n\nSilva, M. A. L. da, Mendes, L. L., Leite, M. A., Rocha, L. L., Borges, C. A., Levy, R. B., & Louzada, M. L. da C. (2025). Sistema de classificação dos locais de aquisição de alimentos com base no Guia Alimentar para a População Brasileira: Locais-Nova. Epidemiologia e Serviços de Saúde, 34, e20240361. https://doi.org/10.1590/S2237-96222025v34.20240361.pt\n\n\nUshey, K., & Wickham, H. (n.d.). renv: Project environments [Computer software]. https://doi.org/10.32614/CRAN.package.renv\n\n\nVartanian, D., Penz, C. de L. e. S., Caldeira, G., Fernandes, C. N., & Giannotti, M. A. (2025). A reproducible pipeline for processing, geocoding, and classifying CNPJs from the Brazilian Federal Revenue Service (RFB) using the Locais-Nova scale [Computer software]. Center for Metropolitan Studies of the University of São Paulo. https://cem-usp.github.io/locais-nova-rfb-geocoding\n\n\nWickham, H. (n.d.-a). The tidyverse style guide. Retrieved July 17, 2023, from https://style.tidyverse.org\n\n\nWickham, H. (n.d.-b). Tidy design principles. https://design.tidyverse.org\n\n\nWickham, H. (2023). The tidy tools manifesto. Tidyverse. https://tidyverse.tidyverse.org/articles/manifesto.html\n\n\nWickham, H., Çetinkaya-Rundel, M., & Grolemund, G. (2023). R for data science: Import, tidy, transform, visualize, and model data (2nd ed.). O’Reilly Media. https://r4ds.hadley.nz"
  }
]